<%- include('partials/head') %>

<nav class="bg-white shadow sticky top-0">
  <div class="max-w-7xl mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <div class="text-lg font-bold">Admin</div>
      <div>
        <a
          href="/admin/dashboard"
          class="text-gray-600 hover:text-gray-800 mx-4"
          >Dashboard</a
        >
        <a href="/admin/products" class="text-gray-600 hover:text-gray-800 mx-4"
          >Products</a
        >
        <a
          href="/admin/inventory"
          class="text-gray-600 hover:text-gray-800 mx-4"
          >Inventory</a
        >
        <a href="/admin/settings" class="text-gray-600 hover:text-gray-800 mx-4"
          >Settings</a
        >
        <a href="/admin/logout" class="text-gray-600 hover:text-gray-800 mx-4"
          >Logout</a
        >
      </div>
    </div>
  </div>
</nav>

<div class="max-w-7xl mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">Add Product</h1>

  <!-- Form to Add Product -->
  <form action="/admin/add-product" method="POST" class="space-y-4">
    <div>
      <label for="name" class="block text-sm font-medium text-gray-700"
        >Product Name</label
      >
      <input
        type="text"
        name="name"
        id="name"
        required
        class="mt-1 p-2 border rounded-md w-full"
      />
    </div>

    <div>
      <label for="price" class="block text-sm font-medium text-gray-700"
        >Price</label
      >
      <input
        type="number"
        step="0.01"
        name="price"
        id="price"
        required
        class="mt-1 p-2 border rounded-md w-full"
      />
    </div>

    <div>
      <label for="stock" class="block text-sm font-medium text-gray-700"
        >Stock</label
      >
      <input
        type="number"
        name="stock"
        id="stock"
        required
        class="mt-1 p-2 border rounded-md w-full"
      />
    </div>

    <div>
      <label for="category" class="block text-sm font-medium text-gray-700"
        >Category</label
      >
      <select
        name="categoryId"
        id="category"
        required
        class="mt-1 p-2 border rounded-md w-full"
      >
        <option value="">Select a category</option>
        <% categories.forEach(category => { %>
        <option value="<%= category.id %>"><%= category.name %></option>
        <% }) %>
      </select>
    </div>

    <div>
      <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md">
        Add Product
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");

    form.addEventListener("submit", function (e) {
      const name = document.getElementById("name").value.trim();
      const price = document.getElementById("price").value;
      const stock = document.getElementById("stock").value;
      const category = document.getElementById("category").value;

      if (!name || !price || !stock || !category) {
        alert("Please fill in all fields before submitting.");
        e.preventDefault(); // Prevent form submission
      }
    });
  });
</script>
